<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TOKEN LIFE</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 20px;
      background: #f2f2f2;
      font-family: system-ui, -apple-system, sans-serif;
    }

    h1 {
      font-size: 44px;
      margin: 0 0 32px 0;
      letter-spacing: 2px;
      text-align: center;
    }

    .token-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 32px 20px;
    }

    .token-row {
      margin-bottom: 36px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .token-label {
      font-size: 18px;
      margin-bottom: 12px;
      text-transform: uppercase;
      text-align: center;
    }

    .token-line {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .token {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      flex-shrink: 0;

      display: flex;
      align-items: center;
      justify-content: center;

      font-size: 36px;
      font-weight: 600;
      color: #000;

      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    /* TOKEN COLORS */
    .gas { background: #ffcc00; }
    .snacks { background: #8bc34a; }
    .alcohol { background: #7e57c2; }
    .other { background: #64b5f6; }
    .dunkin { background: #ff8c00; }
    .traderjoes { background: #d32f2f; }
    .meal { background: #7b1f1f; }

    .reset-button {
      margin-top: 24px;
      padding: 14px 20px;
      font-size: 16px;
      font-weight: 600;
      text-transform: uppercase;
      border: none;
      border-radius: 8px;
      background: #444;
      color: #fff;
      cursor: pointer;
      width: 100%;
    }

    .disabled {
      color: #9e9e9e !important;
    }

    .token.disabled {
      background: #d3d3d3 !important;
      box-shadow: none;
      color: #9e9e9e;
    }

    .app {
      max-width: 420px;
      margin: 0 auto;
    }

    .particle {
      position: fixed;
      width: 6px;
      height: 10px;
      border-radius: 2px;
      pointer-events: none;
      z-index: 9999;
      animation: shard-fall 900ms cubic-bezier(.2,.7,.3,1) forwards;
    }

    @keyframes shard-fall {
      0% {
        transform: translate(0, 0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform:
          translate(var(--dx), var(--dy))
          rotate(var(--rot));
        opacity: 0;
      }
    }

  </style>
</head>

<body>

  <div class="app">

    <h1>TOKEN LIFE</h1>

    <div class="token-grid">

      <div class="token-row">
        <div class="token-label" id="gas-label">GAS</div>
        <div class="token-line">
          <button class="token gas" onclick="useToken('gas')" id="gas-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="traderjoes-label">TRADER JOEâ€™S</div>
        <div class="token-line">
          <button class="token traderjoes" onclick="useToken('traderjoes')" id="traderjoes-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="dunkin-label">DUNKIN</div>
        <div class="token-line">
          <button class="token dunkin" onclick="useToken('dunkin')" id="dunkin-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="meal-label">MEAL</div>
        <div class="token-line">
          <button class="token meal" onclick="useToken('meal')" id="meal-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="snacks-label">CANDY / SNACKS</div>
        <div class="token-line">
          <button class="token snacks" onclick="useToken('snacks')" id="snacks-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="alcohol-label">ALCOHOL</div>
        <div class="token-line">
          <button class="token alcohol" onclick="useToken('alcohol')" id="alcohol-count">0</button>
        </div>
      </div>

      <div class="token-row">
        <div class="token-label" id="other-label">OTHER</div>
        <div class="token-line">
          <button class="token other" onclick="useToken('other')" id="other-count">0</button>
        </div>
      </div>
    </div>

    <button class="reset-button" onclick="resetTokens()">
      RESET TOKENS
    </button>

  </div>

  <script>
    const tokens = [
      'gas',
      'traderjoes',
      'dunkin',
      'meal',
      'snacks',
      'alcohol',
      'other'
    ];

    const clickSounds = [
      'SFX/Token_1.wav',
      'SFX/Token_2.wav',
      'SFX/Token_3.wav',
      'SFX/Token_4.wav',
      'SFX/Token_5.wav'
    ];

    function playClickSound() {
      const src = clickSounds[Math.floor(Math.random() * clickSounds.length)];
      const audio = new Audio(src);
      audio.play();
    }

    function loadTokens() {
      tokens.forEach(t => {
        const value = parseInt(localStorage.getItem(t)) || 0;
        document.getElementById(`${t}-count`).textContent = value;
        updateDisabledState(t, value);
      });
    }

    function useToken(type) {
      let value = parseInt(localStorage.getItem(type)) || 0;
      if (value <= 0) return;

      value--;
      playClickSound();
      localStorage.setItem(type, value);
      const tokenEl = document.getElementById(`${type}-count`);
      tokenEl.textContent = value;
      spawnParticles(tokenEl);
      updateDisabledState(type, value);
    }

    function spawnParticles(tokenEl) {
      const rect = tokenEl.getBoundingClientRect();
      const color = getComputedStyle(tokenEl).backgroundColor;

      const shardCount = 32; // many more shards

      for (let i = 0; i < shardCount; i++) {
        const shard = document.createElement('div');
        shard.className = 'particle';
        shard.style.background = color;

        // start at token center
        shard.style.left = `${rect.left + rect.width / 2}px`;
        shard.style.top = `${rect.top + rect.height / 2}px`;

        // true radial explosion
        const angle = Math.random() * Math.PI * 2;
        const distance = 140 + Math.random() * 120;

        const dx = Math.cos(angle) * distance;
        const dy = Math.sin(angle) * distance;
        const rot = `${(Math.random() - 0.5) * 900}deg`;

        shard.style.setProperty('--dx', `${dx}px`);
        shard.style.setProperty('--dy', `${dy}px`);
        shard.style.setProperty('--rot', rot);

        document.body.appendChild(shard);

        setTimeout(() => shard.remove(), 900);
      }
    }

    function updateDisabledState(type, value) {
      const tokenEl = document.getElementById(`${type}-count`);
      const labelEl = document.getElementById(`${type}-label`);

      if (value === 0) {
        tokenEl.classList.add('disabled');
        labelEl.classList.add('disabled');
      } else {
        tokenEl.classList.remove('disabled');
        labelEl.classList.remove('disabled');
      }
    }

    function initDefaults() {
      if (localStorage.length === 0) {
        localStorage.setItem('gas', 7);
        localStorage.setItem('snacks', 8);
        localStorage.setItem('alcohol', 4);
        localStorage.setItem('dunkin', 6);
        localStorage.setItem('traderjoes', 3);
        localStorage.setItem('meal', 4);
        localStorage.setItem('other', 5);
      }
    }

    function resetTokens() {
      localStorage.clear();
      initDefaults();
      loadTokens();
    }
    
    initDefaults();
    loadTokens();
  </script>

</body>
</html>
